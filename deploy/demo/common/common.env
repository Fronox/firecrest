# Environment vars common for all microservices
# Important: all lists use semicolon to separate items, and must be quoted to escape ';'
# name of header key used to get authentication:
# possible values: "Authorization" ("X-Userinfo" was disabled)
# Authorization:  JWT token as generated by Keycloak: {"Authorization:", "Bearer fjfk..."}
# AUTH_HEADER_NAME=Authorization
# If AUTH_HEADER_NAME = Authorization, it can also check REALM_RSA_PUBLIC_KEY: RSA key from KeyCloak Realm which signs token.
# REALM_RSA_PUBLIC_KEY="MII....QAB"
# use 1 line without headers ("-----BEGIN PUBLIC KEY-----", "-----END PUBLIC KEY-----")
REALM_RSA_PUBLIC_KEY='MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqB44q32bQp8LbyW6dQvgsjseXESkLT1g5LQKGb+P79AC+nOAtxhn8i/kmgc6zsQH8NlUtNJruLxlzdo2/OGmlDGYZH1x6VmAwvJPJ4er0xPUrvZ8YclxYQC16PY5LFiQRNBMRyQwP5Kne1O46FpmADFVWMfoabdnaqoXexxB56b25o8tE2ulRBgfpnrRgZAvf7kWjugRCNO06FV074FVMYHA1aBk0ICyaFCDM/Tb5oaDyGr5c/ZvdrRUrw8vaiYyMgaAnnJPL75cebGoHeMJaEyZalsHA+iuhRAfeAwpSClsmhVqnfH7a7hqrqumVRo27dydqmfVgpFjU5gbFcBZ5wIDAQAB'
#kid: "fVc6h439Xv...."
AUTH_TOKEN_ISSUER='http://localhost:8080/auth/realms/kcrealm'
# specify Audience established by Keycloak, leave empty to skip verification
AUTH_TOKEN_AUD=''
# list authorized users, will be checked by cscs_api_common.py: get_username
AUTH_ALLOWED_USERS=''
# Keycloak scope for clients:
AUTH_REQUIRED_SCOPE=''
REALM_RSA_TYPE=RS256
# scopes filtered for this Firecrest, eg  firecrest-tds.cscs.ch, firecrest-production.cscs.ch
FIRECREST_SERVICE='firecrest.some.place'
# AUTHENTICATION ROLE for FirecREST Service Accounts
AUTH_ROLE=''
#-------
# microservices IPs, also defined on each 'env_make' inside containers
CERTIFICATOR_IP=192.168.220.11
COMPUTE_IP=192.168.220.9
#TaskPersistence (redis)
PERSISTENCE_IP=192.168.220.13
STATUS_IP=192.168.220.4
STORAGE_IP=192.168.220.5
TASKS_IP=192.168.220.6
UTILITIES_IP=192.168.220.7
#----- ports:
CERTIFICATOR_PORT=5010
COMPUTE_PORT=5006
TASKS_PORT=5003
STATUS_PORT=5001
STORAGE_PORT=5002
UTILITIES_PORT=5004
#-------
# microservices urls: used by Kong and between microservices
CERTIFICATOR_URL=http://192.168.220.11:5010
COMPUTE_URL=http://192.168.220.9:5006
STATUS_URL=http://192.168.220.4:5001
STORAGE_URL=http://192.168.220.5:5002
TASKS_URL=http://192.168.220.6:5003
UTILITIES_URL=http://192.168.220.7:5004
# kong_url: used by microservices when return URL to clients
KONG_URL=http://192.168.220.10:8000
#-------
# list of systems 
#public name for systems, where users except to submit jobs and get files (list with ';')
SYSTEMS_PUBLIC='cluster;cluster'
# filesystems mounted in each system
# ; separated for system (position related to SYSTEMS_PUBLIC) and for each filesystem mounted inside each system, separated with ","
# example: let's suppose SYSTEMS_PUBLIC="cluster1;cluster2", cluster1 has "/home" and "/scratch", and cluster2 has mounted "/home":
# FILESYSTEMS = "/home,/scratch;/home"
FILESYSTEMS="/home;/home"
#internal machines that microservices connect to (in correlation with SYSTEMS_PUBLIC)
SYSTEMS_INTERNAL_COMPUTE='192.168.220.12:22;192.168.220.12:22'
SYSTEMS_INTERNAL_STORAGE='192.168.220.12:22;192.168.220.12:22'
SYSTEMS_INTERNAL_UTILITIES='192.168.220.12:22;192.168.220.12:22'
#-------
# COMPUTE options
JOB_BASE_DIR=$HOME
#-------
# Storage:
# public systems to send a job for internal transfer (xfer), must be defined in SYSTEMS_PUBLIC
STORAGE_JOBS_MACHINE=cluster
# expiration time (in secs) for expiration of URL and files (604800=7 days)
STORAGE_TEMPURL_EXP_TIME=604800
# staging area max size file supported (in Bytes)
STORAGE_MAX_FILE_SIZE=5368709120
# Storage technology used for staging area (swift or s3v2 or s3v4, unset to disable)
OBJECT_STORAGE='s3v4'
# partition for internal transfer
XFER_PARTITION=xfer
# machine for external transfers
EXT_TRANSFER_MACHINE_PUBLIC='cluster'
EXT_TRANSFER_MACHINE_INTERNAL='192.168.220.12:22'

#-------
# STATUS: microservices & systems to pool:
STATUS_SERVICES='certificator;utilities;compute;tasks;storage'
STATUS_SYSTEMS='192.168.220.12:22;192.168.220.12:22'
#-------
# UTILITIES: max size of file for download/upload from filesystem in MB
UTILITIES_MAX_FILE_SIZE=5
# TIMEOUT in seconds for synchronous tasks
UTILITIES_TIMEOUT=5
#------
# KONG internal URLs for services
KONG_COMPUTE_URL=http://192.168.220.9:5006
KONG_STATUS_URL=http://192.168.220.4:5001
KONG_STORAGE_URL=http://192.168.220.5:5002
KONG_TASKS_URL=http://192.168.220.6:5003
KONG_UTILITIES_URL=http://192.168.220.7:5004
